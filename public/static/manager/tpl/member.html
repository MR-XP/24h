<script>
    function look(name){
    	nowname=name.substr(name.lastIndexOf('\\')+1);
        $('#name').val(nowname)
    }
</script>
<!-- <script src="/static/manager/js/directives/qiandao.js"></script> -->
<div class="member general " ng-controller="memberController">
	<div class="top row">
		<div class="m-b-sm row f-14 c-3">您当前的位置：<span>{{txt}}</span></div>
		<div class="screening row">
			<div class="select">
				<div class="m-select">
					<select ng-options="i.group_id as i.title for i in groups" ng-model="parmListCard.group_id" ng-change="againLoad();loadCardList()" id="groups">
					</select>
				</div>
				<div class="m-select">
					<select ng-options="k.card_id as k.card_name for k in cardList" ng-model="parmListMember.card_id" ng-change="againLoad();loadMemberList()" id="cards">
					</select>
				</div>
				<div class="m-select">
					<select ng-model="parmListMember.status" ng-change="againLoad();loadMemberList()">
						<option value="1">有效会员</option>
						<option value="2">主卡会员</option>
						<option value="3">无卡会员(包含过期)</option>
					</select>
				</div>
				<div class="m-select">
					<input type="text" placeholder="电话号码" ng-model="parmListMember.phone"><img src="/static/manager/img/search.png" ng-click="search_P()" />
				</div>
				<div class="m-select">
					<input type="text" placeholder="请输入会员姓名查询" ng-model="parmListMember.username"><img src="/static/manager/img/search.png" ng-click="search_N()" />
				</div>
				<div class="m-select">
					<div class="import-export"><button ng-click="goExpire(1)">过期会员统计</button></div>
					<div class="import-export"><button ng-click="goExpire(2)">即将过期会员统计</button></div>
					<div class="import-export"><button ng-click="goExpire(3)">用完次卡会员统计</button></div>
					<div class="import-export"><button ng-click="goExpire(4)">即将用完次卡会员统计</button></div>
					<div class="import-export"><button ng-click="dwp()">导出</button></div>
					<div class="import-export">
						<button ng-click="upload()">导入</button>
					</div>
					<div class="import-export">
						<div class="files">
							<button class="xuanze">选择文件</button>
							<input id="file" type="file" name="file" onchange="look(this.value)" accept="application/vnd.openxmlformats-officedocument.spreadsheetml.sheet,application/vnd.ms-excel" />
						</div>
						<div class="f_name"><input type="text" id="name" readonly="readonly" style="width:80px;border-top:none;border-left: none;border-right: none;"></div>
					</div>
				</div>
			</div>
		</div>
	</div>
	<div class="content">
		<div class="box row">
			<div class="list-details">
				<div class="col-md-3 huiyuan" style="height: 155px" ng-repeat="v in newMemberList.list">
					<div class="description row">
						<div class="col-md-5 col-xs-5 m-box no-padder edit" ng-click="memberD_open({{v.user_id}})">
							<img class="img-circle" ng-style="'uploads/'+v.avatar | adaptBg">
						</div>
						<div class="col-md-7 col-xs-7 text-left padder-r-none">
							<div class="font-bold m-box">
								{{v.real_name}}
								<i class="icon icon-symbol-female m-l-xs female" ng-show="v.sex==2"></i>
                                <i class="icon icon-symbol-male m-l-xs male" ng-show="v.sex==1"></i>
                            </div>
							<div class="m-box">电话：{{v.phone}}</div>
							<div class="m-box">年龄：{{v.age}}</div>
							<div class="m-box">签到次数：{{v.sign_count}}</div>
							<div class="m-box edit c-click" ng-click="getSubUser({{v}})" ng-if="getFamily(v.subUser) != 0">查看子成员</div>
							<div class="m-box" ng-if="getFamily(v.subUser) == 0">暂无子成员</div>
						</div>
					</div>
				</div>
				<div ng-if="newMemberList.list==undefined">暂时没有购买此卡的会员</div>
			</div>
		</div>
		<style>
			.member .box .list-details:last-child {
			    border-bottom: 0 !important;
			}
			.general .box .list-details {
			    height: 100% !important;
			}
		</style>
		<div class="page-footer">
			<div class="pull-left col-md-6 col-xs-6 no-padder text-left">
				<span class="text-sm">共{{newMemberList.total_results}}位会员，共{{newMemberList.total_pages}}页，</span>
				<span class="text-sm">当前显示第{{newMemberList.page_no}}页，</span>
				<span class="text-sm">每页显示{{newMemberList.page_size}}位，</span>
				<span class="text-sm">当前页{{newMemberList.list.length}}位</span>
			</div>
        	<div class="col-md-6 col-xs-6 no-padder text-right">
        		<pagination total-items="newMemberList.total_results" ng-model="parmListMember.page_no" max-size="maxSize" class="pagination-sm m-t-none" boundary-links="true" rotate="false" num-pages="newMemberList.page_size" ng-click="pagesMember()" items-per-page="newMemberList.page_size"></pagination>
        	</div>
		</div>
		<div class="modal fade" tabindex="-1" role="dialog" id="userDetails" aria-labelledby="myLargeModalLabel">
		  	<div class="modal-dialog" role="document">
			    <div class="modal-content">
			      	<div class="modal-header">
			        	<button type="button" class="close" ng-click="getSubUser_C()"><span aria-hidden="true">&times;</span></button>
			        	<span class="modal-title" id="myModalLabel">主卡人：{{mainUser}}</span>
			      	</div>
			      	<div class="modal-body">
			      		<div class="choice" ng-hide="getAllkey.length==0">
			      			<div class="radio">
		                        <label class="i-checks i-checks-sm" ng-repeat="i in getAllkey">
		                            <input class="choice_icon" type="radio" name="a" ng-click="getSelected(i)">
		                            <i></i>{{i}}
		                        </label>
		                    </div>
			      		</div>
			      		<div class="title row">
			      			<div class="col-md-3 col-xs-3">头像</div>
			      			<div class="col-md-3 col-xs-3">名称</div>
			      			<div class="col-md-3 col-xs-3">电话</div>
			      			<div class="col-md-3 col-xs-3">注册时间</div>
			      		</div>
			      		<div class="memberShip">
			      			<div class="details" ng-repeat="k in memberShipList" ng-click="memberD_open({{k.user_id}},checkNum)">
				      			<div class="col-md-3 col-xs-3"><img ng-style="'uploads/'+k.avatar | adaptBg"></div>
				      			<div class="col-md-3 col-xs-3">{{k.real_name}}</div>
				      			<div class="col-md-3 col-xs-3">{{k.phone}}</div>
				      			<div class="col-md-3 col-xs-3">{{k.create_time | limitTo:10}}</div>
				      		</div>
			      		</div>
			      	</div>
			    </div>
			</div>
		</div>
		<div class="modal fade bs-example-modal-lg" tabindex="-1" role="dialog" id="memberDetails" aria-labelledby="myLargeModalLabel" data-backdrop="static">
		  	<div class="modal-dialog modal-lg" role="document">
			    <div class="modal-content">
			      	<div class="modal-header bc-darkpurple">
			        	<span>会员详情</span>
			        	<span class="close_btn f-16 edit-w" ng-click="memberD_close(checkNum)">X</span>
			      	</div>
			      	<div class="modal-body member_modal">
			      		<tabset class="tab-container">
							<!--会员信息-->
			                <tab heading="会员信息" id="memberTab1">
			                	<!-- 会员基本数据 -->
			                	<div class="m-box">
				                	<div class="subtitle m-t-sm font-bold">基本信息</div>
				                	<div class="basic-information m-t-md row">
				                		<div class="col-md-4 col-xs-4 no-padder text-center b-r">
				                			<div class="subhead">头像</div>
				                			<div class="information">
			                                    <div><img class="img-rounded" ng-style="'uploads/'+memberInfo.avatar | adaptBg"></div>
			                                    <div class="m-t f-14 font-bold">
			                                        <span ng-bind="memberInfo.real_name"></span>
			                                        <i class="icon icon-symbol-female m-l-xs female" ng-show="memberInfo.sex==2"></i>
			                                        <i class="icon icon-symbol-male m-l-xs male" ng-show="memberInfo.sex==1"></i>
			                                    </div>
			                                    <div class="m-t">状态：
			                                        <span class="c-green" ng-show="memberInfo.detail.status==1">正常</span>
			                                        <span class="c-red" ng-show="memberInfo.detail.status==0">锁定</span>
			                                    </div>
			                                </div>
				                		</div>
				                		<div class="col-md-4 col-xs-4 no-padder text-center b-r">
				                			<div class="subhead">信息</div>
			                                <div class="information row">
			                                    <div class="row m-t">
			                                        <div class="col-md-5 col-xs-5 no-padder text-right">电话：</div>
			                                        <div class="col-md-7 col-xs-7 no-padder text-left" ng-bind="memberInfo.phone"></div>
			                                    </div>
			                                    <div class="row m-t">
			                                        <div class="col-md-5 col-xs-5 no-padder text-right">年龄：</div>
			                                        <div class="col-md-7 col-xs-7 no-padder text-left" ng-bind="memberInfo.age"></div>
			                                    </div>
			                                    <div class="row m-t">
			                                        <div class="col-md-5 col-xs-5 no-padder text-right">会员卡：</div>
			                                        <div class="col-md-7 col-xs-7 no-padder text-left">{{memberInfo.card.length}}张</div>
			                                    </div>
			                                    <div class="row m-t">
			                                        <div class="col-md-5 col-xs-5 no-padder text-right">金豆：</div>
			                                        <div class="col-md-7 col-xs-7 no-padder text-left">{{memberInfo.detail.pre_paid}}颗</div>
			                                    </div>
			                                </div>
				                		</div>
				                		<div class="col-md-4 col-xs-4 no-padder text-center">
				                			<div class="subhead">签到记录</div>
				                                <div class="information qiandao signIn">
				                                    <div class="sign-record">
				                                        <div id="calendar">
				                                            <div class="title row">
				                                                <div class="col-md-1 col-xs-1 no-padder">
				                                                    <div class="icon_switch" onclick="prev()"><</div>
				                                                </div>
				                                                <div class="col-md-10 col-xs-10 no-padder">
				                                                    <div class="month-span"></div>
				                                                </div>
				                                                <div class="col-md-1 col-xs-1 no-padder">
				                                                    <div class="icon_switch" onclick="next()">></div>
				                                                </div>
				                                            </div>
				                                            <div id="signLayer"></div>
				                                            <!-- <datepicker ng-model="dt" min-date="minDate" show-weeks="false" class="datepicker"></datepicker> -->
				                                        </div>
				                                    </div>
				                                </div>
				                		</div>
				                	</div>
			                	</div>
			                	<!-- 会员卡购买记录 -->
			                	<div class="m-box">
			                		<div class="subtitle m-t-sm font-bold">已购会员卡</div>
			                		<div class="basic-information m-t-md row">
			                            <div class="col-md-2 col-xs-2 no-padder text-center b-r">
			                                <div class="subhead">名称</div>
			                            </div>
			                            <div class="col-md-2 col-xs-2 no-padder b-r text-center">
			                                <div class="subhead">价格</div>
			                            </div>
			                            <div class="col-md-3 col-xs-3 no-padder b-r text-center">
			                                <div class="subhead">有效期</div>
			                            </div>
			                            <div class="col-md-3 col-xs-3 no-padder b-r text-center">
			                                <div class="subhead single">有效天数 / 已用次数/总次数</div>
			                            </div>
			                            <div class="col-md-2 col-xs-2 no-padder text-center">
			                                <div class="subhead">操作</div>
			                            </div>
			                        </div>
			                        <div class="row m-xq f-12 c-moddlegrey" ng-repeat="i in memberInfo.card">
			                            <div class="col-md-2 col-xs-2 no-padder text-center b-r">
			                                <div class="">{{i.card_name}}</div>
			                            </div>
			                            <div class="col-md-2 col-xs-2 no-padder b-r text-center">
			                                <div class="">{{i.price}}</div>
			                            </div>
			                            <div class="col-md-3 col-xs-3 no-padder b-r text-center">
			                                <div ng-if="i.active==0">未激活</div>
			                                <div class="single" ng-if="i.active==1">{{i.start_time | limitTo:10}}——{{i.expire_time | limitTo:10}}</div>
			                            </div>
			                            <div class="col-md-3 col-xs-3 no-padder text-center b-r" ng-if="i.expire_day>=0">
			                                <div ng-if="i.type==1">{{i.expire_day}}天</div>
			                                <div ng-if="i.type==2">{{i.expire_day}}天 / {{i.use_times}}次/{{i.times}}次</div>
			                            </div>
			                            <div class="col-md-3 col-xs-3 no-padder text-center b-r" ng-if="i.expire_day<0">
			                                	已过期
			                            </div>
			                            <div class="col-md-2 col-xs-2 no-padder text-center">
			                                <div class="c-click edit">
			                                	<span ng-show="i.active==0" ng-click="activateCard(i)" style="margin: 0 5px">激活</span>
			                                	<span ng-show="i.active==1" ng-click="editCard(i)" style="margin: 0 5px">编辑</span>
			                                	<!--主卡人才能查看成员-->
			                                	<span ng-if="i.user_id==i.master_id && i.active==1" style="margin: 0 5px" ng-click="subMemberOpen(i)">子成员</span>
			                                </div>
			                            </div>
			                        </div>
			                        <div class="row f-12 c-moddlegrey no-record" ng-hide="memberInfo.card.length>0">
			                            	暂无会员卡
			                        </div>
			                	</div>
								<!--  私教课购买记录 -->
								<div class="m-box1" ng-init="loadCoachCourse(3)">
									<div class="subtitle m-t-sm font-bold">已购私教课</div>
									<div class="basic-information m-t-md row">
                            			<div class="col-md-2 col-xs-2 no-padder text-center b-r">
                                			<div class="subhead">教练名称</div>
                            			</div>
                            			<div class="col-md-2 col-xs-2 no-padder b-r text-center">
                                			<div class="subhead">课程名称</div>
                            			</div>
                            			<div class="col-md-1 col-xs-1 no-padder b-r text-center">
                                			<div class="subhead">服务地点</div>
                            			</div>
                            			<div class="col-md-1 col-xs-1 no-padder b-r text-center">
                                			<div class="subhead">购买价格</div>
                            			</div>
                            			<div class="col-md-1 col-xs-1 no-padder b-r text-center">
                                			<div class="subhead single">总/剩余(节数)</div>
                            			</div>
                            			<div class="col-md-2 col-xs-2 no-padder b-r text-center">
                                			<div class="subhead">购买日期</div>
                            			</div>
                            			<div class="col-md-2 col-xs-2 no-padder b-r text-center">
                                			<div class="subhead">有效期</div>
                            			</div>
                            			<div class="col-md-1 col-xs-1 no-padder text-center">
                                			<div class="subhead">操作</div>
                            			</div>
                        			</div>
                        			<div class="row m-xq f-12 c-moddlegrey private" ng-repeat="p in privateCourse.list">
                            			<div class="col-md-2 col-xs-2 no-padder text-center b-r course_name">
                                			<div class="single">{{p.coach_real_name}}</div>
                            			</div>
                            			<div class="col-md-2 col-xs-2 no-padder text-center b-r">
                                			<div class="single">{{p.course_name}}</div>
                            			</div>
                            			<div class="col-md-1 col-xs-1 no-padder text-center b-r number" ng-mouseover="show_modal = true" ng-mouseleave="show_modal = false">
                                			<a href="" class="c-click">查看</a>
                                			<div class="tanchuang binfo_logo_modal" id="tanchuang" ng-show="show_modal" style="min-width: 200px;">
                                    			<div class="content" >
                                        			<div class="row members">
                                            			<div class="m-qxz" ng-repeat="a in p.shops">{{a.shop_name}}  ({{a.city}})</div>
                                        			</div>
                                    			</div>
                                			</div>
                            			</div>
                            			<div class="col-md-1 col-xs-1 no-padder text-center b-r">
                                			<div class="single">{{p.price}}</div>
                            			</div>
                            			<div class="col-md-1 col-xs-1 no-padder text-center b-r">
                                			<div class="single">{{p.buy_num}} / {{::p.buy_num-p.use_num}}</div>
                            			</div>
                            			<div class="col-md-2 col-xs-2 no-padder text-center b-r">
                                			<div class="single">{{p.create_time}}</div>
                            			</div>
                            			<div class="col-md-2 col-xs-2 no-padder text-center b-r">
                                			<div class="single">{{p.expire_time}}</div>
                            			</div>
                            			<div class="col-md-1 col-xs-1 no-padder text-center edit" ng-click="editCourse(p)">
                                			<div class="c-click">编辑</div>
                            			</div>
                        			</div>
                       				<div class="row f-12 c-moddlegrey no-record" ng-hide="privateCourse.list!=''">
                             			暂无私教课购买记录
                        			</div>
								</div>
								<!--  小团课购买记录 -->
			                    <div class="m-box1" ng-init="loadCoachCourse(2)">
			                        <div class="subtitle m-t-sm font-bold">购买小团课</div>
			                        <div class="basic-information m-t-md row">
			                            <div class="col-md-2 col-xs-2 no-padder text-center b-r">
			                                <div class="subhead">教练名称</div>
			                            </div>
			                            <div class="col-md-2 col-xs-2 no-padder b-r text-center">
			                                <div class="subhead">课程名称</div>
			                            </div>
			                            <div class="col-md-1 col-xs-1 no-padder b-r text-center">
			                                <div class="subhead">服务地点</div>
			                            </div>
			                            <div class="col-md-1 col-xs-1 no-padder b-r text-center">
			                                <div class="subhead">购买价格</div>
			                            </div>
			                            <div class="col-md-1 col-xs-1 no-padder b-r text-center">
			                                <div class="subhead single">总/剩余(节数)</div>
			                            </div>
			                            <div class="col-md-2 col-xs-2 no-padder b-r text-center">
			                                <div class="subhead">购买日期</div>
			                            </div>
			                            <div class="col-md-2 col-xs-2 no-padder b-r text-center">
			                                <div class="subhead">有效期</div>
			                            </div>
			                            <div class="col-md-1 col-xs-1 no-padder text-center">
			                                <div class="subhead">操作</div>
			                            </div>
			                        </div>
			                        <div class="row m-xq f-12 c-moddlegrey private" ng-repeat="p in groupCourse.list">
			                            <div class="col-md-2 col-xs-2 no-padder text-center b-r course_name">
			                                <div class="single">{{p.coach_real_name}}</div>
			                            </div>
			                            <div class="col-md-2 col-xs-2 no-padder text-center b-r">
			                                <div class="single">{{p.course_name}}</div>
			                            </div>
			                            <div class="col-md-1 col-xs-1 no-padder text-center b-r number" ng-mouseover="show_modal = true" ng-mouseleave="show_modal = false">
			                                <a href="" class="c-click">查看</a>
			                                <div class="tanchuang binfo_logo_modal" id="tanchuang" ng-show="show_modal" style="min-width: 200px;">
			                                    <div class="content" >
			                                        <div class="row members">
			                                            <div class="m-qxz" ng-repeat="a in p.shops">{{a.shop_name}}  ({{a.city}})</div>
			                                        </div>
			                                    </div>
			                                </div>
			                            </div>
			                            <div class="col-md-1 col-xs-1 no-padder text-center b-r">
			                                <div class="single">{{p.price}}</div>
			                            </div>
			                            <div class="col-md-1 col-xs-1 no-padder text-center b-r">
			                                <div class="single">{{p.buy_num}} / {{::p.buy_num-p.use_num}}</div>
			                            </div>
			                            <div class="col-md-2 col-xs-2 no-padder text-center b-r">
			                                <div class="single">{{p.create_time}}</div>
			                            </div>
			                            <div class="col-md-2 col-xs-2 no-padder text-center b-r">
			                                <div class="single">{{p.expire_time}}</div>
			                            </div>
			                            <div class="col-md-1 col-xs-1 no-padder text-center edit" ng-click="editCourse(p)">
			                                <div class="c-click">编辑</div>
			                            </div>
			                        </div>
			                        <div class="row f-12 c-moddlegrey no-record" ng-hide="groupCourse.list!=''">
			                             	暂无小团课购买记录
			                        </div>
			                    </div>
			                    <!-- 预约记录 -->
			                    <div class="m-box">
			                        <div class="subtitle m-t-sm font-bold">预约记录</div>
			                        <div class="basic-information m-t-md row">
			                            <div class="col-md-2 col-xs-2 no-padder text-center b-r">
			                                <div class="subhead">课程名称</div>
			                            </div>
			                            <div class="col-md-3 col-xs-3 no-padder b-r text-center">
			                                <div class="subhead">地点</div>
			                            </div>
			                            <div class="col-md-2 col-xs-2 no-padder b-r text-center">
			                                <div class="subhead">预约时间</div>
			                            </div>
			                            <div class="col-md-2 col-xs-2 no-padder b-r text-center">
			                                <div class="subhead">入场时间</div>
			                            </div>
			                            <div class="col-md-2 col-xs-2 no-padder b-r text-center">
			                                <div class="subhead">离场时间</div>
			                            </div>
			                            <div class="col-md-1 col-xs-1 no-padder text-center">
			                                <div class="subhead">状态</div>
			                            </div>
			                        </div>
			                        <div class="row m-xq f-12 c-moddlegrey appt" ng-repeat="k in appointments.list">
			                            <div class="col-md-2 col-xs-2 no-padder text-center b-r">
			                                <div class="">{{k.class_plan.course_name}}</div>
			                            </div>
			                            <div class="col-md-3 col-xs-3 no-padder b-r text-center">
			                                <div class="single">{{k.shop.address}}-{{k.shop.shop_name}}</div>
			                            </div>
			                            <div class="col-md-2 col-xs-2 no-padder b-r text-center">
			                                <div class="single">{{k.create_time}}</div>
			                            </div>
			                            <div class="col-md-2 col-xs-2 no-padder b-r text-center">
			                                <div class="single">{{k.sign_time}}</div>
			                            </div>
			                            <div class="col-md-2 col-xs-2 no-padder b-r text-center">
			                                <div class="single">{{k.sign_out_time}}</div>
			                            </div>
			                            <div class="col-md-1 col-xs-1 no-padder text-center">
			                                <div ng-if="getTimeE(k.end_time)==1 && k.sign==0">旷课</div>
			                                <div ng-if="getTimeE(k.end_time)==1 && k.sign==1">完成</div>
			                                <div ng-if="getTimeE(k.end_time)==1 && k.sign==2">完成</div>
			                                <div ng-if="getTimeE(k.end_time)==1 && k.sign==3">完成</div>
			                                <div ng-if="getTimeE(k.end_time)==1 && k.sign==4">完成</div>
			                                <div ng-if="getTimeE(k.end_time)==0 && k.sign==0">还未签到</div>
			                                <div ng-if="getTimeE(k.end_time)==0 && k.sign==1">开课中</div>
			                                <div ng-if="getTimeE(k.end_time)==0 && k.sign==2">开课中</div>
			                                <div ng-if="getTimeE(k.end_time)==0 && k.sign==3">开课中</div>
			                                <div ng-if="getTimeE(k.end_time)==0 && k.sign==4">开课中</div>
			                            </div>
			                        </div>
			                        <div class="row f-12 c-moddlegrey no-record" ng-hide="appointments.total_pages>0">
			                             暂无预约记录
			                        </div>
			                        <div class="row f-12 fenye c-moddlegrey" ng-show="appointments.total_pages>1">
			                            <div class="pull-left col-md-6 col-xs-6 no-padder text-left">
			                                <span class="text-sm">共{{appointments.total_results}}条记录，共{{appointments.total_pages}}页，</span>
			                                <span class="text-sm">当前显示第{{appointments.page_no}}页，</span>
			                                <span class="text-sm">每页显示{{appointments.page_size}}条</span>
			                            </div>
			                            <div class="col-md-6 col-xs-6 no-padder text-right">
			                                <pagination total-items="appointments.total_results" ng-model="appointmentsPage.page_no" max-size="maxSize" class="pagination-sm m-t-none m-b" boundary-links="true" rotate="false" num-pages="appointments.page_size" ng-click="pagesApp()" items-per-page="appointments.page_size"></pagination>
			                            </div>
			                        </div>
			                    </div>
			                    <!-- 备注列表 -->
			                    <div class="m-box">
			                        <div class="subtitle m-t-sm font-bold">备注列表</div>
			                        <div class="basic-information m-t-md row">
			                            <div class="col-md-3 col-xs-3 no-padder text-center b-r">
			                                <div class="subhead">操作员</div>
			                            </div>
			                            <div class="col-md-3 col-xs-3 no-padder b-r text-center">
			                                <div class="subhead">时间</div>
			                            </div>
			                            <div class="col-md-6 col-xs-6 no-padder text-center">
			                                <div class="subhead">内容</div>
			                            </div>
			                        </div>
			                        <div class="row m-xq f-12 c-moddlegrey" ng-repeat="i in remarks.list">
			                            <div class="col-md-3 col-xs-3 no-padder text-center b-r">
			                                <div class="">{{i.create_user}}</div>
			                            </div>
			                            <div class="col-md-3 col-xs-3 no-padder b-r text-center">
			                                <div class="">{{i.create_time}}</div>
			                            </div>
			                            <div class="col-md-6 col-xs-6 no-padder text-center">
			                                <div class="">{{i.content}}</div>
			                            </div>
			                        </div>
			                        <div class="row f-12 c-moddlegrey no-record" ng-hide="remarks.total_pages>0">
			                             	暂无备注
			                        </div>
			                        <div class="row f-12 c-moddlegrey fenye">
			                            <div class="pull-left col-md-6 col-xs-6 no-padder text-left">
			                                <span class="text-sm">共{{remarks.total_results}}条记录，共{{remarks.total_pages}}页，</span>
			                                <span class="text-sm">当前显示第{{remarks.page_no}}页，</span>
			                                <span class="text-sm">每页显示{{remarks.page_size}}条</span>
			                            </div>
			                            <div class="col-md-6 col-xs-6 no-padder text-right">
			                                <pagination total-items="remarks.total_results" ng-model="remarksPage.page_no" max-size="maxSize" class="pagination-sm m-t-none m-b" boundary-links="true" rotate="false" num-pages="remarks.page_size" ng-click="pagesRem()" items-per-page="remarks.page_size"></pagination>
			                            </div>
			                        </div>
			                    </div>
			                </tab>
			                <!--充值-->
			                <tab heading="会员充值" ng-controller="daigouController" ng-click="swch(4,memberID)">
			                    <form class="form-horizontal">
			                        <div class="form-group m-t-lg">
			                            <label class="col-md-2 col-xs-2 control-label">金额：</label>
			                            <div class="col-md-6 col-xs-6">
			                              <input type="number" class="form-control"  placeholder="如：300" ng-model="info.price">
			                            </div>
			                        </div>
			                        <div class="form-group">
			                            <label class="col-md-2 col-xs-2 control-label">理由：</label>
			                            <div class="col-md-6 col-xs-6">
			                              <textarea class="justification" ng-model="info.attach"></textarea>
			                              <button class="save m-t" ng-click="save()">提交</button>
			                            </div>
			                        </div>
			                    </form>
			                </tab>
			                <!--购卡-->
			                <tab heading="为会员购卡" ng-controller="daigouController" ng-click="swch(1,memberID)">
			                	<form class="form-horizontal">
			                        <div class="form-group m-t-lg">
			                            <label class="col-md-2 col-xs-2 control-label">分区：</label>
			                            <div class="col-md-6 col-xs-6">
			                                <select class="form-control card-sel" ng-model="info.group_id" ng-change="loadCard();loadShop()">
			                                    <option value="{{i.group_id}}" ng-repeat="i in groupList.group">{{i.title}}</option>
			                                </select>
			                            </div>
			                        </div>
			                        <div class="form-group m-t-lg">
			                            <label class="col-md-2 col-xs-2 control-label">卡种：</label>
			                            <div class="col-md-6 col-xs-6">
			                                <select class="form-control card-sel buy-card" ng-model="info.cardId" ng-options="i.card_id as i.card_name for i in newCardList" ng-change="getMoney(1)">
			                                </select>
			                            </div>
			                        </div>
			                        <div class="form-group m-t-lg">
			                            <label class="col-md-2 col-xs-2 control-label">原价：</label>
			                            <div class="col-md-6 col-xs-6">
			                              <input type="text" class="form-control" ng-model="info.origin_price" disabled>
			                            </div>
			                        </div>
			                        <div class="form-group m-t-lg">
			                            <label class="col-md-2 col-xs-2 control-label">现价：</label>
			                            <div class="col-md-6 col-xs-6">
			                              <input type="text" class="form-control" ng-model="info.price" disabled>
			                            </div>
			                        </div>
			                        <div class="form-group m-t-lg">
			                            <label class="col-md-2 col-xs-2 control-label">优惠金额：</label>
			                            <div class="col-md-6 col-xs-6">
			                              <input type="text" class="form-control" ng-model="info.discount_money" ng-change="getSumCard()">
			                            </div>
			                        </div>
			                        <div class="form-group m-t-lg" ng-if="info.discount_money!=0">
			                            <label class="col-md-2 col-xs-2 control-label">合计：</label>
			                            <div class="col-md-6 col-xs-6">
			                              <input type="text" class="form-control" ng-model="info.sumCard" disabled>
			                            </div>
			                        </div>
			                        <div class="form-group m-t-lg">
			                            <label class="col-md-2 col-xs-2 control-label">业绩：</label>
			                            <div class="col-md-6 col-xs-6">
			                              <select class="form-control course-sel" ng-model="info.shop_id" ng-options="p.shop_id as p.city +'-'+ p.shop_name for p in shopList"></select>
			                            </div>
			                        </div>
			                        <div class="form-group">
			                            <label class="col-md-2 col-xs-2 control-label">理由：</label>
			                            <div class="col-md-6 col-xs-6">
			                              <textarea class="justification" ng-model="info.attach"></textarea>
			                            </div>
			                        </div>
			                        <div class="form-group">
			                            <div class="col-md-offset-2 col-xs-offset-2 col-md-6 col-xs-6">
			                              <button class="save m-t" ng-click="save()">提交</button>
			                            </div>
			                        </div>
			                    </form>
			                </tab>
			                <!-- 购私教课 -->
			                <tab heading="为会员购私教课" ng-controller="daigouController" ng-click="swch(3,memberID)">
			                    <form class="form-horizontal">
			                        <div class="form-group m-t-lg">
			                            <label class="col-md-2 col-xs-2 control-label">教练：</label>
			                            <div class="col-md-6 col-xs-6">
			                                <select class="form-control" id="seleOne" ng-model="info.coachUserId" ng-options="v.user_id as v.real_name for v in newCoachList" ng-change="getList(1)"></select>
			                            </div>
			                        </div>
			                        <div class="form-group m-t-lg">
			                            <label class="col-md-2 col-xs-2 control-label">课程：</label>
			                            <div class="col-md-6 col-xs-6">
			                                 <select class="form-control course-sel" ng-model="info.courseId" ng-options="p.course_id as p.course_name for p in newCourseList" ng-change="getMoney(2)"></select>
			                            </div>
			                        </div>
			                        <div class="form-group m-t-lg" ng-if="info.type==3 && info.courseId">
			                            <label class="col-md-2 col-xs-2 control-label">节数：</label>
			                            <div class="col-md-6 col-xs-6">
			                              <input type="number" class="form-control" ng-model="info.buy_num" ng-change="getSum()">
			                            </div>
			                        </div>
			                        <div class="form-group m-t-lg">
			                            <label class="col-md-2 col-xs-2 control-label">原价：</label>
			                            <div class="col-md-6 col-xs-6">
			                              <input type="text" class="form-control" ng-model="info.origin_price" disabled>
			                            </div>
			                        </div>
			                        <div class="form-group m-t-lg">
			                            <label class="col-md-2 col-xs-2 control-label">现价：</label>
			                            <div class="col-md-6 col-xs-6">
			                              <input type="text" class="form-control" ng-model="info.price" disabled>
			                            </div>
			                        </div>
			                        <div class="form-group m-t-lg">
			                            <label class="col-md-2 col-xs-2 control-label">优惠金额：</label>
			                            <div class="col-md-6 col-xs-6">
			                              <input type="text" class="form-control" ng-model="info.discount_money"  ng-change="getSum()">
			                            </div>
			                        </div>
			                        <div class="form-group m-t-lg">
			                            <label class="col-md-2 col-xs-2 control-label">合计：</label>
			                            <div class="col-md-6 col-xs-6">
			                              <input type="text" class="form-control" ng-model="info.sum" disabled>
			                            </div>
			                        </div>
			                        <div class="form-group">
			                            <label class="col-md-2 col-xs-2 control-label">理由：</label>
			                            <div class="col-md-6 col-xs-6">
			                              <textarea class="justification" ng-model="info.attach"></textarea>
			                            </div>
			                        </div>
			                        <div class="form-group">
			                            <div class="col-md-offset-2 col-xs-offset-2 col-md-6 col-xs-6">
			                              <button class="save m-t" ng-click="save()">提交</button>
			                            </div>
			                        </div>
			                    </form>
			                </tab>
			                <!-- 购小团课 -->
			                <tab heading="为会员购小团课" ng-controller="daigouController" ng-click="swch(2,memberID)">
			                    <form class="form-horizontal">
			                        <div class="form-group m-t-lg">
			                            <label class="col-md-2 col-xs-2 control-label">教练：</label>
			                            <div class="col-md-6 col-xs-6">
			                                <select class="form-control" id="seleTwo" ng-model="info.coachUserId" ng-options="v.user_id as v.real_name for v in newCoachList" ng-change="getList(2)"></select>
			                            </div>
			                        </div>
			                        <div class="form-group m-t-lg">
			                            <label class="col-md-2 col-xs-2 control-label">课程：</label>
			                            <div class="col-md-6 col-xs-6">
			                                 <select class="form-control course-sel" ng-model="info.courseId" ng-options="p.course_id as p.course_name for p in newCourseList" ng-change="getMoney(2)"></select>
			                            </div>
			                        </div>
			                        <div class="form-group m-t-lg">
			                            <label class="col-md-2 col-xs-2 control-label">节数：</label>
			                            <div class="col-md-6 col-xs-6">
			                              <input type="number" class="form-control" ng-model="info.buy_num" ng-change="getSum()">
			                            </div>
			                        </div>
			                        <div class="form-group m-t-lg">
			                            <label class="col-md-2 col-xs-2 control-label">原价：</label>
			                            <div class="col-md-6 col-xs-6">
			                              <input type="text" class="form-control" ng-model="info.origin_price" disabled>
			                            </div>
			                        </div>
			                        <div class="form-group m-t-lg">
			                            <label class="col-md-2 col-xs-2 control-label">现价：</label>
			                            <div class="col-md-6 col-xs-6">
			                              <input type="text" class="form-control" ng-model="info.price" disabled>
			                            </div>
			                        </div>
			                        <div class="form-group m-t-lg">
			                            <label class="col-md-2 col-xs-2 control-label">优惠金额：</label>
			                            <div class="col-md-6 col-xs-6">
			                              <input type="text" class="form-control" ng-model="info.discount_money " ng-change="getSum()">
			                            </div>
			                        </div>
			                        <div class="form-group m-t-lg">
			                            <label class="col-md-2 col-xs-2 control-label">合计：</label>
			                            <div class="col-md-6 col-xs-6">
			                              <input type="text" class="form-control" ng-model="info.sum" disabled>
			                            </div>
			                        </div>
			                        <div class="form-group">
			                            <label class="col-md-2 col-xs-2 control-label">理由：</label>
			                            <div class="col-md-6 col-xs-6">
			                              <textarea class="justification" ng-model="info.attach"></textarea>
			                            </div>
			                        </div>
			                        <div class="form-group">
			                            <div class="col-md-offset-2 col-xs-offset-2 col-md-6 col-xs-6">
			                              <button class="save m-t" ng-click="save()">提交</button>
			                            </div>
			                        </div>
			                    </form>
			                </tab>
			                <!--状态-->
			                <tab heading="会员状态设置">
			                	<div class="radio">
			                        <label class="i-checks i-checks-sm col-md-3 col-xs-3" ng-click="set(0)">
			                            <input class="userStatus" type="radio" name="a">
			                            <i></i>锁定
			                        </label>

			                        <label class="i-checks i-checks-sm col-md-offset-1 col-xs-offset-1 col-md-3 col-xs-3" ng-click="set(1)">
			                            <input class="userStatus" type="radio" name="a" value="1">
			                            <i></i>正常
			                        </label>
			                    </div>
			                </tab>
			                <!--备注-->
			                <tab heading="添加备注"><!-- ng-controller="remarkController" -->
			                	<form class="form-horizontal">
			                        <div class="form-group m-t-lg">
			                            <label class="col-md-2 col-xs-2 control-label">备注：</label>
			                            <div class="col-md-6 col-xs-6">
			                              <textarea class="justification" ng-model="memberInfo.cont"></textarea>
			                              <button class="save m-t" ng-click="saveRemark()">提交</button>
			                            </div>
			                        </div>
			                    </form>
			                </tab>
            			</tabset>
            			<!-- 会员卡激活 -->
            			<div class="modal fade" id="activateCard" tabindex="-1" role="dialog" data-backdrop="static">
						  	<div class="modal-dialog" role="document">
					    		<div class="modal-content">
									<div class="rowCard-dtl">
										<div class="rowCard-dtl-cont">
											<div class="rowCard-dtl-top">激活会员卡</div>
											<form class="form-horizontal">
												<div class="form-group">
                                					<label class="col-md-3 col-xs-3 control-label padder-lr-none">激活场馆：</label>
                                					<div class="col-md-9 col-xs-9 riqi padder-lr-none text-left">
                                    					<div class="col-md-10 col-xs-10 no-padder">
                                       						<select class="form-control card-sel" ng-model="actCard.shop_id" ng-options="i.shop_id as i.shop_name for i in shopList"></select>
                                    					</div>
                                					</div>
                            					</div>
                            					<div class="form-group">
                                					<div class="col-md-offset-3 col-xs-offset-3">
                                    					<button class="save" ng-click="saveActivateCard()">保存</button>
                                    					<button class="cancel" ng-click="activateCard_C()">取消</button>
                                					</div>
                            					</div>
											</form>
										</div>
									</div>
					    		</div>
						  	</div>
						</div>
						<!-- 会员卡有效期编辑 -->
						<div class="modal fade" id="editCard" tabindex="-1" role="dialog" data-backdrop="static">
						  	<div class="modal-dialog" role="document">
					    		<div class="modal-content">
									<div class="rowCard-dtl">
										<div class="rowCard-dtl-cont">
											<div class="rowCard-dtl-top">编辑时间</div>
											<form class="form-horizontal">
                            					<div class="form-group">
                                					<label class="col-md-3 col-xs-3 control-label padder-lr-none">到期时间：</label>
                                					<div class="col-md-9 col-xs-9 riqi padder-lr-none text-left">
                                    					<div class="col-md-10 col-xs-10 no-padder">
                                        					<input type="text" data-field="datetime" ng-model="rowDtl.expire_time" readonly>
                                    					</div>
                                					</div>
                            					</div>
                            					<div class="form-group" ng-show="type==2">
                                					<label class="col-md-3 col-xs-3 control-label padder-lr-none">已用次数：</label>
                                					<div class="col-md-9 col-xs-9 riqi padder-lr-none text-left">
                                    					<div class="col-md-10 col-xs-10 no-padder">
                                        					<input type="text" ng-model="rowDtl.use_times ">
                                    					</div>
                                					</div>
                            					</div>
                            					<div class="form-group" ng-show="type==2">
                                					<label class="col-md-3 col-xs-3 control-label padder-lr-none">总次数：</label>
                                					<div class="col-md-9 col-xs-9 riqi padder-lr-none text-left">
                                    					<div class="col-md-10 col-xs-10 no-padder">
                                        					<input type="text" ng-model="rowDtl.times">
                                    					</div>
                                					</div>
                            					</div>
                            					<div class="form-group">
                                					<div class="col-md-offset-3 col-xs-offset-3">
                                    					<button class="save" ng-click="saveDtlCard()">保存</button>
                                    					<button class="cancel" ng-click="editCard_C()">取消</button>
                                					</div>
                            					</div>
                        					</form>
										</div>
									</div>
					    		</div>
						  	</div>
						</div>
						<!-- 私教/小团课编辑 -->
            			<div class="modal fade" id="editCourse" tabindex="-1" role="dialog" data-backdrop="static">
						  	<div class="modal-dialog" role="document">
					    		<div class="modal-content">
									<div class="rowCard-dtl">
			                            <div class="rowCard-dtl-cont">
			                                <div class="rowCard-dtl-top">编辑私教课/小团课</div>
			                                <form class="form-horizontal">
			                                    <div class="form-group">
			                                        <label class="col-md-3 col-xs-3 control-label padder-lr-none">到期时间：</label>
			                                        <div class="col-md-9 col-xs-9 riqi padder-lr-none text-left">
			                                            <div class="col-md-10 col-xs-10 no-padder">
			                                                <input type="text" data-field="datetime" ng-model="rowPri.expire_time" readonly>
			                                            </div>
			                                        </div>
			                                    </div>
			                                    <div class="form-group">
			                                        <label class="col-md-3 col-xs-3 control-label padder-lr-none">购买节数：</label>
			                                        <div class="col-md-9 col-xs-9 riqi padder-lr-none text-left">
			                                            <div class="col-md-10 col-xs-10 no-padder">
			                                                <input type="text" ng-model="rowPri.buy_num">
			                                            </div>
			                                        </div>
			                                    </div>
			                                    <div class="form-group">
			                                        <label class="col-md-3 col-xs-3 control-label padder-lr-none">使用节数：</label>
			                                        <div class="col-md-9 col-xs-9 riqi padder-lr-none text-left">
			                                            <div class="col-md-10 col-xs-10 no-padder">
			                                                <input type="text" ng-model="rowPri.use_num">
			                                            </div>
			                                        </div>
			                                    </div>
			                                    <div class="form-group">
			                                        <div class="col-md-offset-3 col-xs-offset-3">
			                                            <button class="save" ng-click="saveDtlCourse(2)">保存</button>
			                                            <button class="cancel" ng-click="editCourse_C()">取消</button>
			                                        </div>
			                                    </div>
			                                </form>
			                            </div>
			                        </div>
					    		</div>
						  	</div>
						</div>
			      	</div>
			    </div>
		  	</div>
		</div>
	</div>
	<div class="modal fade bs-example-modal-lg" tabindex="-1" role="dialog" id="loading" aria-labelledby="myLargeModalLabel" data-backdrop="static">
	  	<div class="modal-dialog modal-lg" role="document">
		    <div class="modal-content">
		    	<div class="load_animate">
		    		<div id="ajaxloader2">
							<div class="outer"></div>
					</div>
		    	</div>
		    </div>
	  	</div>
	</div>
	<div id="dtBox"></div>
	<div class="modal fade" id="signModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" data-backdrop="static">
        <div class="modal-dialog" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                    <span class="modal-title" id="signModalLabel">签到记录</span>
                </div>
                <div class="modal-body">
                    <div class="row sign_title">
                        <div class="col-md-4 col-xs-4 text-center">入场时间</div>
                        <div class="col-md-4 col-xs-4 text-center">出场时间</div>
                        <div class="col-md-4 col-xs-4 text-center">锻炼时长</div>
                    </div>
                    <div class="row sign_content">
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <div class="modal fade" tabindex="-1" role="dialog" id="subMembers" aria-labelledby="myLargeModalLabel">
		<div class="modal-dialog" role="document">
		    <div class="modal-content">
		      	<div class="modal-header">
		        	<button type="button" class="close" ng-click="subMemberClose()"><span aria-hidden="true">&times;</span></button>
		        	<button class="modal-title" id="myModalLabel" ng-click="memberAddOpen()">成员添加</button>
		      	</div>
		      	<div class="modal-body" style="overflow: hidden;">
		      		<div class="title row" style="text-align: center;">
		      			<div class="col-md-2 col-xs-2">头像</div>
		      			<div class="col-md-2 col-xs-2">名称</div>
		      			<div class="col-md-3 col-xs-3">电话</div>
		      			<div class="col-md-3 col-xs-3">注册时间</div>
		      			<div class="col-md-2 col-xs-2">操作</div>
		      		</div>
		      		<div class="row" style="text-align: center;height: auto;line-height: 30px;" ng-repeat="k in memberList">
		      			<div class="col-md-2 col-xs-2"><img ng-style="'uploads/'+k.avatar | adaptBg"></div>
			      		<div class="col-md-2 col-xs-2">{{k.real_name}}</div>
			      		<div class="col-md-3 col-xs-3">{{k.phone}}</div>
			      		<div class="col-md-3 col-xs-3">{{k.create_time | limitTo:10}}</div>
			      		<div class="col-md-2 col-xs-2" style="text-align: center;" ng-click="delUser(k.user_id)"><span style="color: #3498db;cursor:pointer">删除</span></div>
		      		</div>
		      	</div>
		      	<div class="modal-footer">
		      		
		      	</div>
		    </div>
		</div>
	</div>
	
    <div class="modal fade" tabindex="-1" role="dialog" id="memberAdd" aria-labelledby="myModalLabel">
		<div class="modal-dialog" role="document">
		    <div class="modal-content">
		      	<div class="modal-header">
		        	<button type="button" class="close" ng-click="subMemberClose()"><span aria-hidden="true">&times;</span></button>
		        	<span class="modal-title" id="myModalLabel">添加成员</span>
		      	</div>
		      	<br />
		        <div class="content">
		            <div class="alone row m-b">
		                <label class="col-md-3 col-xs-3 no-padder text-right">手机号：</label>
		                <div class="col-md-8 col-xs-8 no-padder text-left">
		                    <input type="number" maxlength="11" ng-model="member.phone">
		                </div>
		            </div>
		            <div class="alone row m-b">
		                <div class="footer">
		                    <button class="col-md-offset-3 col-xs-offset-3 btn save" id="submitData" ng-click="memberSave()">保存</button>
		                    <button class="btn cancel" id="resetData" ng-click="memberAddClose()">取消</button>
		                </div>
		            </div>
		        </div>
		    </div>
		</div>
	</div>
	
</div>



